<!DOCTYPE html>
<html>
  <head>
    <title>Wineries in PEC</title>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC2K65vBQlKRXAjpHzEMYhGOqe_bxE9-4U&callback=initMap&libraries=&v=weekly"
      defer
    ></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta charset="utf-8">
    <link re="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"></script>
    
    <style type="text/css">
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }

      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  
  <script>
 var map;
            var InforObj = [];
            var centerCords = {
                lat: 43.99995890218392,
                lng: -77.23550486659113
            };
            var markersOnMap = [{
                    placeName: "Sandbanks Estate Winery",
                    LatLng: [{
                        lat: 43.94008451249478,
                        lng: -77.41696616020205
                    }]
                },
                {
                    placeName: "TerraCello Winery",
                    LatLng: [{
                        lat: 44.02028270774693,
                        lng: -77.29948634286238
                    }]
                },
                {
                    placeName: "Karlo Estates Winery",
                    LatLng: [{
                        lat: 43.9699060230289,
                        lng: -77.37134767095976
                    }]
                },
                {
                    placeName: "Lighthall Vineyards",
                    LatLng: [{
                        lat: 43.89314927017774,
                        lng: -77.12345273478509
                    }]
                },
                {
                    placeName: "Norman Hardie Winery and Vineyard",
                    LatLng: [{
                        lat: 43.95780170753629,
                        lng: -77.44502194932953
                    }]
                },
                {
                    placeName: "Black Prince Winery",
                    LatLng: [{
                        lat: 44.005354534040684,
                        lng: -77.16401022041812
                    }]
                },
                {
                    placeName: "Rosehall Run Vineyards",
                    LatLng: [{
                        lat: 43.953606505774545,
                        lng: -77.4492204280055
                    }]
                },
                {
                    placeName: "Three Dog Winery",
                    LatLng: [{
                        lat: 44.13942806627715,
                        lng: -77.12025593271107
                    }]
                },
                {
                    placeName: "Huff Estates Winery",
                    LatLng: [{
                        lat: 44.023513740213346,
                        lng: -77.28779744040993
                    }]
                },
                {
                    placeName: "Waupoos Estates Winery",
                    LatLng: [{
                        lat: 44.01952759501089,
                        lng: -76.9717868911636
                    }]
                },
                        
            ];

            window.onload = function () {
                initMap();
            };

            function addMarkerInfo() {
                for (var i = 0; i < markersOnMap.length; i++) {
                    var contentString = '<div id="content"><h1>' + markersOnMap[i].placeName +
                        '</h1><p>Lorem ipsum dolor sit amet, vix mutat posse suscipit id, vel ea tantas omittam detraxit.</p></div>';

                    const marker = new google.maps.Marker({
                        position: markersOnMap[i].LatLng[0],
                        map: map
                    });

                    const infowindow = new google.maps.InfoWindow({
                        content: contentString,
                        maxWidth: 200
                    });

                    marker.addListener('click', function () {
                        closeOtherInfo();
                        infowindow.open(marker.get('map'), marker);
                        InforObj[0] = infowindow;
                    });
                    // marker.addListener('mouseover', function () {
                    //     closeOtherInfo();
                    //     infowindow.open(marker.get('map'), marker);
                    //     InforObj[0] = infowindow;
                    // });
                    // marker.addListener('mouseout', function () {
                    //     closeOtherInfo();
                    //     infowindow.close();
                    //     InforObj[0] = infowindow;
                    // });
                }
            }

            function closeOtherInfo() {
                if (InforObj.length > 0) {
                    InforObj[0].set("marker", null);
                    InforObj[0].close();
                    InforObj.length = 0;
                }
            }

            function initMap() {
                map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 4,
                    center: centerCords
                });
                addMarkerInfo();
            }
  </script>
 
  <body>
    <h1>Top 10 Wineries in Prince Edward County, Ontario</h1>
    <input id="pac-input" />
    <div id="map"></div>
    <p><a href="/googlelab/index.html">Back to Home Page</a></p>
  </body>
</html>
